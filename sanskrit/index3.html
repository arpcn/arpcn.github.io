<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARPCN èª¿è©¦å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #2196F3, #673AB7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #2196F3;
        }
        
        h2 {
            color: #2196F3;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .url-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .url-item {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .url-item:hover {
            border-color: #2196F3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.1);
        }
        
        .url-title {
            font-weight: bold;
            color: #2196F3;
            margin-bottom: 8px;
            font-size: 16px;
        }
        
        .url-path {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
            word-break: break-all;
        }
        
        .buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 120px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-primary {
            background: #2196F3;
            color: white;
        }
        
        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #4CAF50;
            color: white;
        }
        
        .btn-success:hover {
            background: #388E3C;
            transform: translateY(-2px);
        }
        
        .btn-warning {
            background: #FF9800;
            color: white;
        }
        
        .btn-warning:hover {
            background: #F57C00;
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background: #F44336;
            color: white;
        }
        
        .btn-danger:hover {
            background: #D32F2F;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #9E9E9E;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #757575;
            transform: translateY(-2px);
        }
        
        .bookmark-section {
            background: #fff3e0;
            border-left-color: #FF9800;
        }
        
        .tips {
            background: #e8f5e9;
            border-left-color: #4CAF50;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .tip-item {
            margin-bottom: 8px;
            padding-left: 10px;
            border-left: 3px solid #4CAF50;
        }
        
        .status-panel {
            background: #e3f2fd;
            border-left-color: #2196F3;
            font-size: 14px;
        }
        
        .status-item {
            margin-bottom: 8px;
            padding: 8px;
            background: white;
            border-radius: 6px;
        }
        
        .code-block {
            background: #263238;
            color: #eceff1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 10px 0;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            
            .url-list {
                grid-template-columns: 1fr;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ ARPCN ç¶²ç«™èª¿è©¦å·¥å…·</h1>
        
        <!-- ç‹€æ…‹é¢æ¿ -->
        <div class="section status-panel">
            <h2>ğŸ“Š ç•¶å‰ç‹€æ…‹</h2>
            <div class="status-item">
                <strong>ç•¶å‰ URL:</strong> <span id="current-url">è¼‰å…¥ä¸­...</span>
            </div>
            <div class="status-item">
                <strong>å±å¹•å°ºå¯¸:</strong> <span id="screen-size">è¼‰å…¥ä¸­...</span>
            </div>
            <div class="status-item">
                <strong>è¨­å‚™ä¿¡æ¯:</strong> <span id="device-info">è¼‰å…¥ä¸­...</span>
            </div>
            <div class="status-item">
                <strong>ç°¡å–®æ¨¡å¼:</strong> <span id="simple-mode">è¼‰å…¥ä¸­...</span>
            </div>
        </div>
        
        <!-- å¿«é€Ÿè¨ªå• -->
        <div class="section">
            <h2>ğŸš€ å¿«é€Ÿè¨ªå•é é¢</h2>
            <div class="buttons">
                <button class="btn btn-primary" onclick="openUrl('/')">ğŸ  é¦–é </button>
                <button class="btn btn-success" onclick="openUrlWithDebug('/')">ğŸ› é¦–é ï¼ˆèª¿è©¦ï¼‰</button>
                <button class="btn btn-warning" onclick="openUrl('/Tipitaka/mula/vinaya/vinaya1')">ğŸ“– Vinaya</button>
                <button class="btn btn-danger" onclick="openUrlWithDebug('/Tipitaka/mula/vinaya/vinaya1')">ğŸ› Vinayaï¼ˆèª¿è©¦ï¼‰</button>
            </div>
            
            <div style="margin-top: 15px;">
                <h3>å¸¸ç”¨é é¢åˆ—è¡¨</h3>
                <div class="url-list" id="url-list">
                    <!-- é é¢åˆ—è¡¨æœƒç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
                </div>
            </div>
        </div>
        
        <!-- èª¿è©¦å·¥å…· -->
        <div class="section">
            <h2>ğŸ”§ èª¿è©¦å·¥å…·</h2>
            <div class="buttons">
                <button class="btn btn-primary" onclick="enableEruda()">ğŸ¯ å•Ÿç”¨ Eruda æ§åˆ¶å°</button>
                <button class="btn btn-success" onclick="testSimpleButton()">ğŸ”„ æ¸¬è©¦æ›¿ä»£ç‰ˆæŒ‰éˆ•</button>
                <button class="btn btn-warning" onclick="checkPreloadStatus()">ğŸ“Š æª¢æŸ¥é åŠ è¼‰ç‹€æ…‹</button>
                <button class="btn btn-danger" onclick="clearConsole()">ğŸ§¹ æ¸…ç©ºæ§åˆ¶å°</button>
            </div>
        </div>
        
        <!-- æ›¸ç±¤å·¥å…· -->
        <div class="section bookmark-section">
            <h2>ğŸ“š å‰µå»ºèª¿è©¦æ›¸ç±¤</h2>
            <div class="buttons">
                <button class="btn btn-primary" onclick="createBookmark()">â­ å‰µå»º Eruda æ›¸ç±¤</button>
                <button class="btn btn-success" onclick="createDebugBookmark()">ğŸ› å‰µå»ºèª¿è©¦æ›¸ç±¤</button>
                <button class="btn btn-warning" onclick="createSimpleBookmark()">ğŸ”„ å‰µå»º Simple æ›¸ç±¤</button>
            </div>
            
            <div class="code-block" id="bookmark-code">
                // é»æ“ŠæŒ‰éˆ•ç”Ÿæˆæ›¸ç±¤ä»£ç¢¼
            </div>
            
            <p style="font-size: 12px; color: #666; margin-top: 10px;">
                <strong>ä½¿ç”¨æ–¹æ³•:</strong> é•·æŒ‰ä¸Šé¢çš„ä»£ç¢¼ï¼Œé¸æ“‡ã€Œè¤‡è£½ã€ï¼Œç„¶å¾Œå‰µå»ºæ–°æ›¸ç±¤ï¼Œè²¼ä¸Šä»£ç¢¼å³å¯ã€‚
            </p>
        </div>
        
        <!-- ä½¿ç”¨æç¤º -->
        <div class="section tips">
            <h2>ğŸ’¡ ä½¿ç”¨æç¤º</h2>
            <div class="tip-item">1. é»æ“Šã€Œå¿«é€Ÿè¨ªå•ã€æŒ‰éˆ•å¯ä»¥ç›´æ¥æ‰“é–‹å°æ‡‰é é¢</div>
            <div class="tip-item">2. å¸¶ ğŸ› çš„æŒ‰éˆ•æœƒé–‹å•Ÿèª¿è©¦æ¨¡å¼ï¼ˆURL æ·»åŠ  ?debug=1ï¼‰</div>
            <div class="tip-item">3. Eruda æ§åˆ¶å°æœƒåœ¨é é¢å³ä¸‹è§’é¡¯ç¤ºç¶ è‰²å·¥å…·ç®±åœ–æ¨™</div>
            <div class="tip-item">4. å‰µå»ºçš„æ›¸ç±¤å¯ä»¥åœ¨ä»»ä½•é é¢ä½¿ç”¨ï¼Œé–‹å•Ÿèª¿è©¦æ¨¡å¼</div>
            <div class="tip-item">5. å¦‚æœæŒ‰éˆ•ä¸é¡¯ç¤ºï¼Œå¯ä»¥é»æ“Šã€Œæ¸¬è©¦æ›¿ä»£ç‰ˆæŒ‰éˆ•ã€</div>
            <div class="tip-item">6. ç§»å‹•ç«¯å»ºè­°ä½¿ç”¨ã€Œå‰µå»ºæ›¸ç±¤ã€åŠŸèƒ½ï¼Œæ–¹ä¾¿éš¨æ™‚èª¿è©¦</div>
        </div>
        
        <!-- è‡ªå®šç¾©è¨ªå• -->
        <div class="section">
            <h2>ğŸ”— è‡ªå®šç¾©è¨ªå•</h2>
            <div style="margin-bottom: 15px;">
                <input type="text" id="custom-path" placeholder="è¼¸å…¥è·¯å¾‘ï¼Œä¾‹å¦‚ï¼š/Tipitaka/mula/vinaya/vinaya1" 
                       style="width: 100%; padding: 12px; border: 2px solid #2196F3; border-radius: 8px; font-size: 16px; margin-bottom: 10px;">
                <div class="buttons">
                    <button class="btn btn-primary" onclick="openCustomUrl()">å‰å¾€</button>
                    <button class="btn btn-success" onclick="openCustomUrlWithDebug()">å‰å¾€ï¼ˆèª¿è©¦ï¼‰</button>
                    <button class="btn btn-warning" onclick="openCustomUrlWithSimple()">å‰å¾€ï¼ˆSimple ç‰ˆï¼‰</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // åŸºç¤ URL
        const BASE_URL = 'https://arpcn.top';
        
        // å¸¸ç”¨é é¢åˆ—è¡¨
        const commonPages = [
            { title: 'é¦–é ', path: '/', desc: 'ç¶²ç«™é¦–é ' },
            { title: 'ç­†è¨˜', path: '/notes/', desc: 'å­¸ç¿’ç­†è¨˜' },
            { title: 'å·¥å…·', path: '/sync/', desc: 'åŒæ­¥å·¥å…·' },
            { title: '404 é é¢', path: '/404', desc: 'éŒ¯èª¤é é¢' }
        ];
        
        // åˆå§‹åŒ–å‡½æ•¸
        function init() {
            // æ›´æ–°ç‹€æ…‹
            updateStatus();
            
            // ç”Ÿæˆé é¢åˆ—è¡¨
            generateUrlList();
            
            // ç”Ÿæˆæ›¸ç±¤ä»£ç¢¼
            updateBookmarkCode();
            
            // æ·»åŠ éµç›¤å¿«æ·éµ
            setupKeyboardShortcuts();
        }
        
        // æ›´æ–°ç‹€æ…‹é¢æ¿
        function updateStatus() {
            document.getElementById('current-url').textContent = window.location.href;
            document.getElementById('screen-size').textContent = `${window.innerWidth} Ã— ${window.innerHeight} (dpr: ${window.devicePixelRatio})`;
            document.getElementById('device-info').textContent = navigator.userAgent.substring(0, 80) + '...';
            document.getElementById('simple-mode').textContent = window.location.href.includes('simple') ? 'æ˜¯' : 'å¦';
        }
        
        // ç”Ÿæˆé é¢åˆ—è¡¨
        function generateUrlList() {
            const urlList = document.getElementById('url-list');
            urlList.innerHTML = '';
            
            commonPages.forEach(page => {
                const item = document.createElement('div');
                item.className = 'url-item';
                item.innerHTML = `
                    <div class="url-title">${page.title}</div>
                    <div class="url-path">${page.path}</div>
                    <div style="color: #666; font-size: 13px; margin-bottom: 10px;">${page.desc}</div>
                    <div class="buttons">
                        <button class="btn btn-primary" onclick="openUrl('${page.path}')" style="padding: 6px 12px; font-size: 12px;">å‰å¾€</button>
                        <button class="btn btn-success" onclick="openUrlWithDebug('${page.path}')" style="padding: 6px 12px; font-size: 12px;">èª¿è©¦</button>
                        <button class="btn btn-warning" onclick="openUrl('${page.path}?simple')" style="padding: 6px 12px; font-size: 12px;">Simple</button>
                    </div>
                `;
                urlList.appendChild(item);
            });
        }
        
        // æ›´æ–°æ›¸ç±¤ä»£ç¢¼
        function updateBookmarkCode() {
            const erudaCode = `javascript:(function(){var s=document.createElement('script');s.src='https://cdn.jsdelivr.net/npm/eruda';s.onload=function(){eruda.init();console.log('Eruda å·²å•Ÿç”¨');};document.body.appendChild(s);})();`;
            document.getElementById('bookmark-code').textContent = erudaCode;
        }
        
        // è¨­ç½®éµç›¤å¿«æ·éµ
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', (e) => {
                // Ctrl + D: é–‹å•Ÿèª¿è©¦
                if (e.ctrlKey && e.key === 'd') {
                    e.preventDefault();
                    enableEruda();
                }
                
                // Ctrl + H: è¿”å›é¦–é 
                if (e.ctrlKey && e.key === 'h') {
                    e.preventDefault();
                    openUrl('/');
                }
                
                // Ctrl + S: Simple æ¨¡å¼
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    window.location.href = BASE_URL + '?simple';
                }
            });
        }
        
        // === æ ¸å¿ƒåŠŸèƒ½å‡½æ•¸ ===
        
        // æ‰“é–‹ URL
        function openUrl(path) {
            window.open(BASE_URL + path, '_blank');
        }
        
        // æ‰“é–‹å¸¶èª¿è©¦çš„ URL
        function openUrlWithDebug(path) {
            const url = BASE_URL + path + (path.includes('?') ? '&' : '?') + 'debug=1';
            window.open(url, '_blank');
        }
        
        // æ‰“é–‹è‡ªå®šç¾© URL
        function openCustomUrl() {
            const path = document.getElementById('custom-path').value.trim();
            if (path) {
                openUrl(path);
            } else {
                alert('è«‹è¼¸å…¥è·¯å¾‘');
            }
        }
        
        // æ‰“é–‹å¸¶èª¿è©¦çš„è‡ªå®šç¾© URL
        function openCustomUrlWithDebug() {
            const path = document.getElementById('custom-path').value.trim();
            if (path) {
                openUrlWithDebug(path);
            } else {
                alert('è«‹è¼¸å…¥è·¯å¾‘');
            }
        }
        
        // æ‰“é–‹ Simple ç‰ˆçš„è‡ªå®šç¾© URL
        function openCustomUrlWithSimple() {
            const path = document.getElementById('custom-path').value.trim();
            if (path) {
                openUrl(path + (path.includes('?') ? '&' : '?') + 'simple');
            } else {
                alert('è«‹è¼¸å…¥è·¯å¾‘');
            }
        }
        
        // å•Ÿç”¨ Eruda æ§åˆ¶å°
        function enableEruda() {
            if (typeof eruda === 'undefined') {
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/eruda';
                script.onload = function() {
                    eruda.init();
                    console.log('ğŸ¯ Eruda æ§åˆ¶å°å·²å•Ÿç”¨');
                    alert('Eruda æ§åˆ¶å°å·²å•Ÿç”¨ï¼è«‹æŸ¥çœ‹é é¢å³ä¸‹è§’çš„ç¶ è‰²å·¥å…·ç®±åœ–æ¨™ã€‚');
                };
                document.body.appendChild(script);
            } else {
                eruda.show();
                console.log('ğŸ¯ Eruda æ§åˆ¶å°å·²é¡¯ç¤º');
                alert('Eruda æ§åˆ¶å°å·²ç¶“é–‹å•Ÿ');
            }
        }
        
        // æ¸¬è©¦æ›¿ä»£ç‰ˆæŒ‰éˆ•
        function testSimpleButton() {
            if (window.opener && window.opener.createFloatingButton) {
                try {
                    window.opener.createFloatingButton();
                    console.log('âœ… å·²åœ¨ç›®æ¨™é é¢å‰µå»ºæŒ‰éˆ•');
                    alert('å·²å˜—è©¦åœ¨ç›®æ¨™é é¢å‰µå»ºæ›¿ä»£ç‰ˆæŒ‰éˆ•');
                } catch (e) {
                    console.error('å‰µå»ºæŒ‰éˆ•å¤±æ•—:', e);
                    alert('å‰µå»ºæŒ‰éˆ•å¤±æ•—ï¼š' + e.message);
                }
            } else {
                console.log('âš ï¸ ç„¡æ³•è¨ªå•ç›®æ¨™é é¢ï¼Œè«‹åœ¨æ–°æ¨™ç±¤é æ‰“é–‹é é¢');
                alert('è«‹å…ˆåœ¨æ–°æ¨™ç±¤é æ‰“é–‹ä¸€å€‹é é¢ï¼Œç„¶å¾Œè¿”å›æ­¤é é¢æ¸¬è©¦');
            }
        }
        
        // æª¢æŸ¥é åŠ è¼‰ç‹€æ…‹
        function checkPreloadStatus() {
            if (window.opener) {
                try {
                    const status = {
                        PRELOAD_INITIALIZED: window.opener.PRELOAD_INITIALIZED,
                        PAGE_ENHANCEMENTS_INITIALIZED: window.opener.PAGE_ENHANCEMENTS_INITIALIZED,
                        simpleModeButtonAdded: window.opener.simpleModeButtonAdded,
                        searchBoxFound: window.opener.searchBoxFound
                    };
                    console.log('ğŸ“Š é åŠ è¼‰ç‹€æ…‹:', status);
                    alert('ç‹€æ…‹å·²è¼¸å‡ºåˆ°æ§åˆ¶å°');
                } catch (e) {
                    console.error('æª¢æŸ¥ç‹€æ…‹å¤±æ•—:', e);
                    alert('ç„¡æ³•æª¢æŸ¥ç›®æ¨™é é¢ç‹€æ…‹');
                }
            } else {
                console.log('ç•¶å‰é é¢ç‹€æ…‹:', {
                    PRELOAD_INITIALIZED: window.PRELOAD_INITIALIZED,
                    PAGE_ENHANCEMENTS_INITIALIZED: window.PAGE_ENHANCEMENTS_INITIALIZED
                });
                alert('ç•¶å‰é é¢ç‹€æ…‹å·²è¼¸å‡ºåˆ°æ§åˆ¶å°');
            }
        }
        
        // æ¸…ç©ºæ§åˆ¶å°
        function clearConsole() {
            console.clear();
            console.log('ğŸ§¹ æ§åˆ¶å°å·²æ¸…ç©º');
            alert('æ§åˆ¶å°å·²æ¸…ç©º');
        }
        
        // å‰µå»ºæ›¸ç±¤
        function createBookmark() {
            const code = `javascript:(function(){var%20s=document.createElement('script');s.src='https://cdn.jsdelivr.net/npm/eruda';s.onload=function(){eruda.init();console.log('Eruda%20å·²å•Ÿç”¨');};document.body.appendChild(s);})();`;
            
            // å˜—è©¦è‡ªå‹•å‰µå»ºæ›¸ç±¤ï¼ˆåƒ…åœ¨æŸäº›ç€è¦½å™¨æœ‰æ•ˆï¼‰
            try {
                window.external.AddFavorite(location.href, 'Eruda æ§åˆ¶å°');
            } catch (e) {
                // å¦‚æœè‡ªå‹•å‰µå»ºå¤±æ•—ï¼Œé¡¯ç¤ºä»£ç¢¼è®“ç”¨æˆ¶æ‰‹å‹•å‰µå»º
                const bookmarkCode = document.getElementById('bookmark-code');
                bookmarkCode.style.backgroundColor = '#e8f5e9';
                bookmarkCode.style.border = '2px solid #4CAF50';
                
                setTimeout(() => {
                    bookmarkCode.style.backgroundColor = '';
                    bookmarkCode.style.border = '';
                }, 2000);
                
                alert('è«‹æ‰‹å‹•å‰µå»ºæ›¸ç±¤ï¼š\n1. é•·æŒ‰ä¸¦è¤‡è£½ä¸Šé¢çš„ä»£ç¢¼\n2. å‰µå»ºæ–°æ›¸ç±¤\n3. åç¨±ï¼šEruda æ§åˆ¶å°\n4. URLï¼šè²¼ä¸Šè¤‡è£½çš„ä»£ç¢¼');
            }
        }
        
        // å‰µå»ºèª¿è©¦æ›¸ç±¤
        function createDebugBookmark() {
            const code = `javascript:(function(){location.href=location.href+(location.href.includes('?')?'&':'?')+'debug=1';})();`;
            document.getElementById('bookmark-code').textContent = code;
            alert('èª¿è©¦æ›¸ç±¤ä»£ç¢¼å·²æ›´æ–°\n\nä½¿ç”¨æ­¤æ›¸ç±¤å¯åœ¨ä»»ä½•é é¢é–‹å•Ÿèª¿è©¦æ¨¡å¼');
        }
        
        // å‰µå»º Simple æ›¸ç±¤
        function createSimpleBookmark() {
            const code = `javascript:(function(){location.href=location.href+(location.href.includes('?')?'&':'?')+'simple';})();`;
            document.getElementById('bookmark-code').textContent = code;
            alert('Simple ç‰ˆæ›¸ç±¤ä»£ç¢¼å·²æ›´æ–°\n\nä½¿ç”¨æ­¤æ›¸ç±¤å¯åœ¨ä»»ä½•é é¢åˆ‡æ›åˆ° Simple æ¨¡å¼');
        }
        
        // åˆå§‹åŒ–
        window.addEventListener('load', init);
        
        // å…¨å±€å‡½æ•¸ï¼Œæ–¹ä¾¿å…¶ä»–é é¢èª¿ç”¨
        window.openArpcnPage = openUrl;
        window.openArpcnPageWithDebug = openUrlWithDebug;
        window.enableDebugMode = enableEruda;
        
        console.log('ğŸ”§ ARPCN èª¿è©¦å·¥å…·å·²åŠ è¼‰');
        console.log('å¿«æ·éµï¼šCtrl+D å•Ÿç”¨èª¿è©¦ï¼ŒCtrl+H é¦–é ï¼ŒCtrl+S Simple æ¨¡å¼');
    </script>
</body>
</html>
